\documentclass[10pt]{article}
%%%http://pedrokroger.net/2011/04/printing-python-code-with-latex/
\usepackage[T1]{fontenc}
\usepackage[scaled]{beramono}
\renewcommand*\familydefault{\ttdefault}
\usepackage{listings}
\newcommand{\code}[2] {
   \hrulefill
   \subsection*{#1}
   \lstinputlisting{#2}
   \vspace{2em}
}

\lstset{
   language=Python,
   showstringspaces=false,
   tabsize=4,
   commentstyle=\itshape,
   basicstyle = \ttfamily,
   breaklines,
   breakautoindent,
   breakindent = 5pt,
   prebreak = !,
   postbreak = \space,
}

\pagestyle{headings}
\pagenumbering{arabic}

\setlength{\oddsidemargin}{-0.75in} % there is 1 inch before the
                                % side margin in ``article'' class
\setlength{\textwidth}{8.0in}

\setlength{\voffset}{0pt}
%\setlength{\topmargin}{-36pt}     % there is 1 inch before the
\setlength{\topmargin}{-0.95in}     % there is 1 inch before the
                                % top margin in ``article'' class and
                                % then room for header, etc.
\setlength{\textheight}{10.0in}

\begin{document}

\code{img}{img.py}

\end{document}
